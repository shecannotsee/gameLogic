**核心战斗流程**

* 第一阶段：初始化状态

    玩家状态初始化：选择战斗属性，战斗属性决定技能。选择装备携带。
    
    敌对目标初始化：设定初始化。

* 第二阶段：回合阶段（玩家），玩家的回合顺序通常由玩家属性来决定，优先级：辅助》输出》坦克。

    * 一、回合开始阶段：
        
        1.根据装备特性，计算生命值，伤害增益，技能增强等。

        2.根据技能（被动），计算生命值，伤害增益，技能增强等。
    
        3.根据持有buff（攻击增益类，持续伤害类，持续治疗类等），计算生命值，伤害增益，技能增益等。

    * 二、回合阶段：

        1.选择技能。
        
        2.选择对应目标。
        
        3.释放技能。

        4.对应目标进行相应结算，计算生命值，buff等。（自动进行）

        5.重复1-4直到玩家选择手动结束回合。

 * 第三阶段：回合阶段（NPC）

    * 一、回合开始阶段：
        
        1.根据装备特性，计算生命值，伤害增益，技能增强等。

        2.根据技能（被动），计算生命值，伤害增益，技能增强等。
    
        3.根据持有buff（攻击增益类，持续伤害类，持续治疗类等），计算生命值，伤害增益，技能增益等。

    * 二、回合阶段：

        1.选择技能。
        
        2.选择对应目标，**自动选择**，受到坦克嘲讽影响。
        
        3.释放技能。

        4.对应目标进行相应结算，计算生命值，buff等。（自动进行）

        5.重复1-4直到无法选择满足条件1。

* 第四阶段：判断是否满足战斗结束状态

    * 判断一（优先）：满足特定剧情（任务）要求，战斗结束。

    * 判断二（其次）：玩家一方或者NPC全部死亡。


